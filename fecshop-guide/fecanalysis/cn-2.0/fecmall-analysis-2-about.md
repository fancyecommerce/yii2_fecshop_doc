关于Fecmall Analysis 2.0
=============


> Fecmall Analysis 2.0，是Fecmall数据分析系统2.0版本，简称`FA-2.0`，全称 **Fecshop Analysis** ，是针对fecmall开源电商系统打造的一款商城用户
数据分析统计系统，是通过js打点和php发送数据的2种方式接收原始数据，然后通过一系列的mapreduce
计算，归并算法计算统计数据，然后呈现给营销人员的系统，
trace系统就像一个摄像头，时刻接收来自网站的数据，统计计算，帮助营销人员，
查看历史数据，调整营销策略，管理营销人员，
根据历史数据决定运营策略，提高你的电商网站的销售额


### FA-2.0 Demo


Demo：http://faadmin.fecpx.com/

测试账户密码：`test`   `fecmall123`

### FA-2.0 技术栈

`php` + `mysql` + `mongodb`

### FA-2.0 应用

应用市场地址：http://addons.fecmall.com/16262115

### 关于FA-2.0版本


1.FA-1.0版本：

对于历史版本FA-1.0,采用的golang+vue+php+mongodb+elasticSearch等搭建起来的，安装使用非常的麻烦和费劲，phper使用也是非常难用，
另外fecmall-2版本的不满足，因此决定开发FA-2.0系统


FA-2.0版本，从易用性着手，尽量简化使用难度，二开难度，使用尽量少的技术栈实现，来满足大家的使用


2.FA-2.0版本：

2.1文件结构：FA-2.0，以Fecmall应用扩展的方式开发，是一个插件独立包，通过应用市场下单后，以应用的方式安装后，即可使用

2.2数据库：mongodb数据库 + mysql 数据库（一些基础信息编辑）

2.3域名：使用单独的域名，以及单独的app入口，appfa文件夹，

### FA收集数据的来源

1.网站业务数据：包含网站的产品，用户，分类，订单等信息

2.用户行为数据：对于fecshop的PC端（appfront），WAP端（apphtml5），2个前端入口
的用户访问数据都进行了对接，在fecmall已经默认js埋点，通过js收集浏览器数据，以及php服务端发送用户订单等
数据，来进行数据收集，您在fecmall商城中通过配置开启即可（不需要自己在各个地方打点了）。

3.业务参数数据：譬如广告参数里面的广告员编号，广告渠道，广告活动等。



### 为什么要做FA系统

对于电商系统，很多的追踪，可以用`google analysis`追踪，如果做广告，某些大的广告平台
也会提供一些统计功能，为什么fecshop要做`数据统计分析系统`呢？原因如下：

一：用户行为数据收集广度问题，FA可以做更广度的收集

1.`google analysis`针对的是所有的网站类型，虽然针对电商做了一些
升级功能，但是，对于电商来说，远远不够，而且google作为平台，也有很多法律限制，很多信息不能收集，
譬如：不能收集用户的邮箱，以及一些购物车产品数据等

平台的数据授权，对于业务数据的收集不够全面，它没有收集`用户注册` `登录`数据，
没有收集具体的`sku`，`分类搜索`，等数据，对于针对业务的数据，`不够全面`，
因此无法满足需要，譬如我想通过email搜索某个用户的行为数据（email是用户在商城
注册的email），是无法满足的

2.个性化业务参数：譬如加入自己的业务广告信息，活动，渠道等信息

3.对于google analysis，是通过页面加载js的方式进行收集，而按钮js提交，ajax等无页面刷新的js提交操作，无法做到数据收集。


二：用户行为数据的准确性问题

1.订单支付成功数据收集问题

对于`订单数据`的收集，`google analysis`是通过订单成功页面进行的，通过在网站订单支付成功返回的成功页面加入js埋点，当用户支付成功返回网站时进行接收，

但下面的情况会造成订单数据`不准确`：

1.1电商网站生成订单，跳转到第三方支付平台，支付完成后，用户直接关掉了页面，
并没有跳转回电商订单支付成功页面，因此没有加载支付成功页面的js，
进而`无法收集` 订单支付成功数据。

1.2对于跨境商城，有一些支付并不像`paypal`，`支付宝`这样，很快就可以支付完成，
而是需要等几十分钟，几个小时，因为这些支付渠道需要到相应的信用卡银行去扣款，
存在延迟，当支付成功后，支付通道会通过`IPN`消息的方式通知商城，支付成功，更改
订单状态为`支付成功状态`,而IPN发送的订单支付状态，是支付通道发给服务端的，是`没有浏览器
界面`的，因此，传统的js收集数据的方式`并不能`收集到订单支付成功数据
，而FA系统可以通过api接收商城传送的订单支付成功数据。

另外有一些信用卡或者银行收款渠道，付款完成后，只是一个支付中的状态，收款存在延迟，时间不等，支付成功后给网站支付发IPN消息接收，
这类显然要通过网站接口给FA传送订单支付状态

三：广告数据分析支付度问题


对于广告分析支持不够

1.作为公司的广告，每一个广告都需要花钱，
从老板的角度，就想对广告数据进行更加`详细的统计`,下面的针对广告做的`精细数据分析`，也是
`FA系统`独有的

譬如：

1.1数据统计：每个`广告`在每一天的数据报告，
`每个广告`每天带来多少pv，uv，生成了多少订单，新增了多少用户等等。

1.2数据统计：每个`广告员`的所有的广告汇总，统计这个广告员的具体的数据报告

1.3数据统计：每个`广告小组`的所有的广告汇总

1.4数据统计：每个`广告活动`的所有的广告汇总

1.5数据统计；每个`渠道`，譬如facebook, google ppc，的所有广告汇总

1.6数据统计：每个`子渠道`的广告汇总

1.7数据统计：针对`EDM`这类，`多链接广告`的统计，统计各个链接进入
商城的流量的实际情况。

上面只是说了一个大概，具体的统计数据参看系统里面的具体详细。



2.最后，最重要的，是数据的掌控性，我本地有了数据，那么我可以根据业务需要进行二次开发，
进行数据分析，满足需要。


四：历史数据积累


FA系统的用户行为数据，收集后保存到自己的数据库里面，随着公司也的业务增长，开发能力提升，随时可以将
历史数据调出来，进行数据挖掘，满足需要。


















